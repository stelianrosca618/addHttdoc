;(function(){function require(a,b,c){var d=require.resolve(a);if(null==d){c=c||a;b=b||'root';var e=new Error('Failed to require "'+c+'" from "'+b+'"');e.path=c;e.parent=b;e.require=true;throw e;}var f=require.modules[d];if(!f._resolving&&!f.exports){var g={};g.exports={};g.client=g.component=true;f._resolving=true;f.call(this,g.exports,require.relative(d),g);delete f._resolving;f.exports=g.exports}return f.exports}require.modules={};require.aliases={};require.resolve=function(a){if(a.charAt(0)==='/')a=a.slice(1);var b=[a,a+'.js',a+'.json',a+'/index.js',a+'/index.json'];for(var i=0;i<b.length;i++){var a=b[i];if(require.modules.hasOwnProperty(a))return a;if(require.aliases.hasOwnProperty(a))return require.aliases[a]}};require.normalize=function(a,b){var c=[];if('.'!=b.charAt(0))return b;a=a.split('/');b=b.split('/');for(var i=0;i<b.length;++i){if('..'==b[i]){a.pop()}else if('.'!=b[i]&&''!=b[i]){c.push(b[i])}}return a.concat(c).join('/')};require.register=function(a,b){require.modules[a]=b};require.alias=function(a,b){if(!require.modules.hasOwnProperty(a)){throw new Error('Failed to alias "'+a+'", it does not exist');}require.aliases[b]=a};require.relative=function(d){var p=require.normalize(d,'..');function lastIndexOf(a,b){var i=a.length;while(i--){if(a[i]===b)return i}return-1}function localRequire(a){var b=localRequire.resolve(a);return require(b,d,a)}localRequire.resolve=function(a){var c=a.charAt(0);if('/'==c)return a.slice(1);if('.'==c)return require.normalize(p,a);var b=d.split('/');var i=lastIndexOf(b,'deps')+1;if(!i)i=0;a=b.slice(0,i+1).join('/')+'/deps/'+a;return a};localRequire.exists=function(a){return require.modules.hasOwnProperty(localRequire.resolve(a))};return localRequire};require.register("component-emitter/index.js",function(d,e,f){f.exports=Emitter;function Emitter(a){if(a)return mixin(a)};function mixin(a){for(var b in Emitter.prototype){a[b]=Emitter.prototype[b]}return a}Emitter.prototype.on=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};Emitter.prototype.once=function(a,b){var c=this;this._callbacks=this._callbacks||{};function on(){c.off(a,on);b.apply(this,arguments)}b._off=on;this.on(a,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};var c=this._callbacks[a];if(!c)return this;if(1==arguments.length){delete this._callbacks[a];return this}var i=c.indexOf(b._off||b);if(~i)c.splice(i,1);return this};Emitter.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),callbacks=this._callbacks[a];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,b)}}return this};Emitter.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};Emitter.prototype.hasListeners=function(a){return!!this.listeners(a).length}});require.register("dropzone/index.js",function(a,b,c){c.exports=b("./lib/dropzone.js")});require.register("dropzone/lib/dropzone.js",function(m,n,o){(function(){var l,Em,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__hasProp={}.hasOwnProperty,__extends=function(a,b){for(var c in b){if(__hasProp.call(b,c))a[c]=b[c]}function ctor(){this.constructor=a}ctor.prototype=b.prototype;a.prototype=new ctor();a.__super__=b.prototype;return a},__slice=[].slice;Em=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:n("emitter");noop=function(){};l=(function(g){var h;__extends(l,g);l.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];l.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return noop},forceFallback:false,fallback:function(){var a,messageElement,span,_i,_len,_ref;this.element.className=""+this.element.className+" dz-browser-not-supported";_ref=this.element.getElementsByTagName("div");for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];if(/(^| )dz-message($| )/.test(a.className)){messageElement=a;a.className="dz-message";continue}}if(!messageElement){messageElement=l.createElement("<div class=\"dz-message\"><span></span></div>");this.element.appendChild(messageElement)}span=messageElement.getElementsByTagName("span")[0];if(span){span.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,srcRatio,trgRatio;b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height};srcRatio=a.width/a.height;trgRatio=this.options.thumbnailWidth/this.options.thumbnailHeight;if(a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth){b.trgHeight=b.srcHeight;b.trgWidth=b.srcWidth}else{if(srcRatio>trgRatio){b.srcHeight=a.height;b.srcWidth=b.srcHeight*trgRatio}else{b.srcWidth=a.width;b.srcHeight=b.srcWidth/trgRatio}}b.srcX=(a.width-b.srcWidth)/2;b.srcY=(a.height-b.srcHeight)/2;return b},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:noop,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var b,removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results,_this=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}a.previewElement=l.createElement(this.options.previewTemplate.trim());a.previewTemplate=a.previewElement;this.previewsContainer.appendChild(a.previewElement);_ref=a.previewElement.querySelectorAll("[data-dz-name]");for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];b.textContent=a.name}_ref1=a.previewElement.querySelectorAll("[data-dz-size]");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){b=_ref1[_j];b.innerHTML=this.filesize(a.size)}if(this.options.addRemoveLinks){a._removeLink=l.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"+this.options.dictRemoveFile+"</a>");a.previewElement.appendChild(a._removeLink)}removeFileEvent=function(e){e.preventDefault();e.stopPropagation();if(a.status===l.UPLOADING){return l.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(a)})}else{if(_this.options.dictRemoveFileConfirmation){return l.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(a)})}else{return _this.removeFile(a)}}};_ref2=a.previewElement.querySelectorAll("[data-dz-remove]");_results=[];for(_k=0,_len2=_ref2.length;_k<_len2;_k++){removeLink=_ref2[_k];_results.push(removeLink.addEventListener("click",removeFileEvent))}return _results},removedfile:function(a){var b;if((b=a.previewElement)!=null){b.parentNode.removeChild(a.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,_i,_len,_ref,_results;a.previewElement.classList.remove("dz-file-preview");a.previewElement.classList.add("dz-image-preview");_ref=a.previewElement.querySelectorAll("[data-dz-thumbnail]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){c=_ref[_i];c.alt=a.name;_results.push(c.src=b)}return _results},error:function(a,b){var c,_i,_len,_ref,_results;a.previewElement.classList.add("dz-error");if(typeof b!=="String"&&b.error){b=b.error}_ref=a.previewElement.querySelectorAll("[data-dz-errormessage]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){c=_ref[_i];_results.push(c.textContent=b)}return _results},errormultiple:noop,processing:function(a){a.previewElement.classList.add("dz-processing");if(a._removeLink){return a._removeLink.textContent=this.options.dictCancelUpload}},processingmultiple:noop,uploadprogress:function(a,b,c){var d,_i,_len,_ref,_results;_ref=a.previewElement.querySelectorAll("[data-dz-uploadprogress]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){d=_ref[_i];_results.push(d.style.width=""+b+"%")}return _results},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(a){return a.previewElement.classList.add("dz-success")},successmultiple:noop,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:noop,complete:function(a){if(a._removeLink){return a._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,previewTemplate:"<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-details\">\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n    <div class=\"dz-size\" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-success-mark\"><span>✔</span></div>\n  <div class=\"dz-error-mark\"><span>✘</span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n</div>"};h=function(){var a,object,objects,target,val,_i,_len;target=arguments[0],objects=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=objects.length;_i<_len;_i++){object=objects[_i];for(a in object){val=object[a];target[a]=val}}return target};function l(a,b){var c,fallback,_ref;this.element=a;this.version=l.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.");}if(this.element.dropzone){throw new Error("Dropzone already attached.");}l.instances.push(this);this.element.dropzone=this;c=(_ref=l.optionsForElement(this.element))!=null?_ref:{};this.options=h({},this.defaultOptions,c,b!=null?b:{});if(this.options.forceFallback||!l.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.");}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((fallback=this.getExistingFallback())&&fallback.parentNode){fallback.parentNode.removeChild(fallback)}if(this.options.previewsContainer){this.previewsContainer=l.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=l.getElements(this.options.clickable,"clickable")}}this.init()}l.prototype.getAcceptedFiles=function(){var a,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];if(a.accepted){_results.push(a)}}return _results};l.prototype.getRejectedFiles=function(){var a,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];if(!a.accepted){_results.push(a)}}return _results};l.prototype.getQueuedFiles=function(){var a,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];if(a.status===l.QUEUED){_results.push(a)}}return _results};l.prototype.getUploadingFiles=function(){var a,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];if(a.status===l.UPLOADING){_results.push(a)}}return _results};l.prototype.init=function(){var c,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1,_this=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(l.createElement("<div class=\"dz-default dz-message\"><span>"+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){setupHiddenFileInput=function(){if(_this.hiddenFileInput){document.body.removeChild(_this.hiddenFileInput)}_this.hiddenFileInput=document.createElement("input");_this.hiddenFileInput.setAttribute("type","file");if((_this.options.maxFiles==null)||_this.options.maxFiles>1){_this.hiddenFileInput.setAttribute("multiple","multiple")}if(_this.options.acceptedFiles!=null){_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles)}_this.hiddenFileInput.style.visibility="hidden";_this.hiddenFileInput.style.position="absolute";_this.hiddenFileInput.style.top="0";_this.hiddenFileInput.style.left="0";_this.hiddenFileInput.style.height="0";_this.hiddenFileInput.style.width="0";document.body.appendChild(_this.hiddenFileInput);return _this.hiddenFileInput.addEventListener("change",function(){var a,files,_i,_len;files=_this.hiddenFileInput.files;if(files.length){for(_i=0,_len=files.length;_i<_len;_i++){a=files[_i];_this.addFile(a)}}return setupHiddenFileInput()})};setupHiddenFileInput()}this.URL=(_ref=window.URL)!=null?_ref:window.webkitURL;_ref1=this.events;for(_i=0,_len=_ref1.length;_i<_len;_i++){c=_ref1[_i];this.on(c,this.options[c])}this.on("uploadprogress",function(){return _this.updateTotalUploadProgress()});this.on("removedfile",function(){return _this.updateTotalUploadProgress()});this.on("canceled",function(a){return _this.emit("complete",a)});this.on("complete",function(a){if(_this.getUploadingFiles().length===0&&_this.getQueuedFiles().length===0){return setTimeout((function(){return _this.emit("queuecomplete")}),0)}});noPropagation=function(e){e.stopPropagation();if(e.preventDefault){return e.preventDefault()}else{return e.returnValue=false}};this.listeners=[{element:this.element,events:{"dragstart":function(e){return _this.emit("dragstart",e)},"dragenter":function(e){noPropagation(e);return _this.emit("dragenter",e)},"dragover":function(e){var a;try{a=e.dataTransfer.effectAllowed}catch(_error){}e.dataTransfer.dropEffect='move'===a||'linkMove'===a?'move':'copy';noPropagation(e);return _this.emit("dragover",e)},"dragleave":function(e){return _this.emit("dragleave",e)},"drop":function(e){noPropagation(e);return _this.drop(e)},"dragend":function(e){return _this.emit("dragend",e)}}}];this.clickableElements.forEach(function(b){return _this.listeners.push({element:b,events:{"click":function(a){if((b!==_this.element)||(a.target===_this.element||l.elementInside(a.target,_this.element.querySelector(".dz-message")))){return _this.hiddenFileInput.click()}}}})});this.enable();return this.options.init.call(this)};l.prototype.destroy=function(){var a;this.disable();this.removeAllFiles(true);if((a=this.hiddenFileInput)!=null?a.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return l.instances.splice(l.instances.indexOf(this),1)};l.prototype.updateTotalUploadProgress=function(){var a,file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;totalBytesSent=0;totalBytes=0;a=this.getAcceptedFiles();if(a.length){_ref=this.getAcceptedFiles();for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];totalBytesSent+=file.upload.bytesSent;totalBytes+=file.upload.total}totalUploadProgress=100*totalBytesSent/totalBytes}else{totalUploadProgress=100}return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)};l.prototype.getFallbackForm=function(){var a,fields,fieldsString,form;if(a=this.getExistingFallback()){return a}fieldsString="<div class=\"dz-fallback\">";if(this.options.dictFallbackText){fieldsString+="<p>"+this.options.dictFallbackText+"</p>"}fieldsString+="<input type=\"file\" name=\""+this.options.paramName+(this.options.uploadMultiple?"[]":"")+"\" "+(this.options.uploadMultiple?'multiple="multiple"':void 0)+" /><input type=\"submit\" value=\"Upload!\"></div>";fields=l.createElement(fieldsString);if(this.element.tagName!=="FORM"){form=l.createElement("<form action=\""+this.options.url+"\" enctype=\"multipart/form-data\" method=\""+this.options.method+"\"></form>");form.appendChild(fields)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return form!=null?form:fields};l.prototype.getExistingFallback=function(){var c,getFallback,tagName,_i,_len,_ref;getFallback=function(a){var b,_i,_len;for(_i=0,_len=a.length;_i<_len;_i++){b=a[_i];if(/(^| )fallback($| )/.test(b.className)){return b}}};_ref=["div","form"];for(_i=0,_len=_ref.length;_i<_len;_i++){tagName=_ref[_i];if(c=getFallback(this.element.getElementsByTagName(tagName))){return c}}};l.prototype.setupEventListeners=function(){var b,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];_results.push((function(){var a,_results1;a=b.events;_results1=[];for(event in a){listener=a[event];_results1.push(b.element.addEventListener(event,listener,false))}return _results1})())}return _results};l.prototype.removeEventListeners=function(){var b,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];_results.push((function(){var a,_results1;a=b.events;_results1=[];for(event in a){listener=a[event];_results1.push(b.element.removeEventListener(event,listener,false))}return _results1})())}return _results};l.prototype.disable=function(){var b,_i,_len,_ref,_results;this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")});this.removeEventListeners();_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];_results.push(this.cancelUpload(b))}return _results};l.prototype.enable=function(){this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")});return this.setupEventListeners()};l.prototype.filesize=function(a){var b;if(a>=1024*1024*1024*1024/10){a=a/(1024*1024*1024*1024/10);b="TiB"}else if(a>=1024*1024*1024/10){a=a/(1024*1024*1024/10);b="GiB"}else if(a>=1024*1024/10){a=a/(1024*1024/10);b="MiB"}else if(a>=1024/10){a=a/(1024/10);b="KiB"}else{a=a*10;b="b"}return"<strong>"+(Math.round(a)/10)+"</strong> "+b};l.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit('maxfilesreached',this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};l.prototype.drop=function(e){var a,items;if(!e.dataTransfer){return}this.emit("drop",e);a=e.dataTransfer.files;if(a.length){items=e.dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry!=null)){this._addFilesFromItems(items)}else{this.handleFiles(a)}}};l.prototype.paste=function(e){var a,_ref;if((e!=null?(_ref=e.clipboardData)!=null?_ref.items:void 0:void 0)==null){return}this.emit("paste",e);a=e.clipboardData.items;if(a.length){return this._addFilesFromItems(a)}};l.prototype.handleFiles=function(a){var b,_i,_len,_results;_results=[];for(_i=0,_len=a.length;_i<_len;_i++){b=a[_i];_results.push(this.addFile(b))}return _results};l.prototype._addFilesFromItems=function(a){var b,item,_i,_len,_results;_results=[];for(_i=0,_len=a.length;_i<_len;_i++){item=a[_i];if((item.webkitGetAsEntry!=null)&&(b=item.webkitGetAsEntry())){if(b.isFile){_results.push(this.addFile(item.getAsFile()))}else if(b.isDirectory){_results.push(this._addFilesFromDirectory(b,b.name))}else{_results.push(void 0)}}else if(item.getAsFile!=null){if((item.kind==null)||item.kind==="file"){_results.push(this.addFile(item.getAsFile()))}else{_results.push(void 0)}}else{_results.push(void 0)}}return _results};l.prototype._addFilesFromDirectory=function(d,e){var f,entriesReader,_this=this;f=d.createReader();entriesReader=function(b){var c,_i,_len;for(_i=0,_len=b.length;_i<_len;_i++){c=b[_i];if(c.isFile){c.file(function(a){if(_this.options.ignoreHiddenFiles&&a.name.substring(0,1)==='.'){return}a.fullPath=""+e+"/"+a.name;return _this.addFile(a)})}else if(c.isDirectory){_this._addFilesFromDirectory(c,""+e+"/"+c.name)}}};return f.readEntries(entriesReader,function(a){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(a):void 0:void 0})};l.prototype.accept=function(a,b){if(a.size>this.options.maxFilesize*1024*1024){return b(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else if(!l.isValidFile(a,this.options.acceptedFiles)){return b(this.options.dictInvalidFileType)}else if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){b(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",a)}else{return this.options.accept.call(this,a,b)}};l.prototype.addFile=function(b){var c=this;b.upload={progress:0,total:b.size,bytesSent:0};this.files.push(b);b.status=l.ADDED;this.emit("addedfile",b);this._enqueueThumbnail(b);return this.accept(b,function(a){if(a){b.accepted=false;c._errorProcessing([b],a)}else{c.enqueueFile(b)}return c._updateMaxFilesReachedClass()})};l.prototype.enqueueFiles=function(a){var b,_i,_len;for(_i=0,_len=a.length;_i<_len;_i++){b=a[_i];this.enqueueFile(b)}return null};l.prototype.enqueueFile=function(a){var b=this;a.accepted=true;if(a.status===l.ADDED){a.status=l.QUEUED;if(this.options.autoProcessQueue){return setTimeout((function(){return b.processQueue()}),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.");}};l.prototype._thumbnailQueue=[];l.prototype._processingThumbnail=false;l.prototype._enqueueThumbnail=function(a){var b=this;if(this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(a);return setTimeout((function(){return b._processThumbnailQueue()}),0)}};l.prototype._processThumbnailQueue=function(){var a=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),function(){a._processingThumbnail=false;return a._processThumbnailQueue()})};l.prototype.removeFile=function(a){if(a.status===l.UPLOADING){this.cancelUpload(a)}this.files=without(this.files,a);this.emit("removedfile",a);if(this.files.length===0){return this.emit("reset")}};l.prototype.removeAllFiles=function(a){var b,_i,_len,_ref;if(a==null){a=false}_ref=this.files.slice();for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];if(b.status!==l.UPLOADING||a){this.removeFile(b)}}return null};l.prototype.createThumbnail=function(c,d){var e,_this=this;e=new FileReader;e.onload=function(){var b;b=document.createElement("img");b.onload=function(){var a,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;c.width=b.width;c.height=b.height;resizeInfo=_this.options.resize.call(_this,c);if(resizeInfo.trgWidth==null){resizeInfo.trgWidth=_this.options.thumbnailWidth}if(resizeInfo.trgHeight==null){resizeInfo.trgHeight=_this.options.thumbnailHeight}a=document.createElement("canvas");ctx=a.getContext("2d");a.width=resizeInfo.trgWidth;a.height=resizeInfo.trgHeight;drawImageIOSFix(ctx,b,(_ref=resizeInfo.srcX)!=null?_ref:0,(_ref1=resizeInfo.srcY)!=null?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,(_ref2=resizeInfo.trgX)!=null?_ref2:0,(_ref3=resizeInfo.trgY)!=null?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight);thumbnail=a.toDataURL("image/png");_this.emit("thumbnail",c,thumbnail);if(d!=null){return d()}};return b.src=e.result};return e.readAsDataURL(c)};l.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;parallelUploads=this.options.parallelUploads;processingLength=this.getUploadingFiles().length;i=processingLength;if(processingLength>=parallelUploads){return}queuedFiles=this.getQueuedFiles();if(!(queuedFiles.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength))}else{while(i<parallelUploads){if(!queuedFiles.length){return}this.processFile(queuedFiles.shift());i++}}};l.prototype.processFile=function(a){return this.processFiles([a])};l.prototype.processFiles=function(a){var b,_i,_len;for(_i=0,_len=a.length;_i<_len;_i++){b=a[_i];b.processing=true;b.status=l.UPLOADING;this.emit("processing",b)}if(this.options.uploadMultiple){this.emit("processingmultiple",a)}return this.uploadFiles(a)};l.prototype._getFilesWithXhr=function(b){var c,files;return files=(function(){var a,_len,_ref,_results;_ref=this.files;_results=[];for(a=0,_len=_ref.length;a<_len;a++){c=_ref[a];if(c.xhr===b){_results.push(c)}}return _results}).call(this)};l.prototype.cancelUpload=function(a){var b,groupedFiles,_i,_j,_len,_len1,_ref;if(a.status===l.UPLOADING){groupedFiles=this._getFilesWithXhr(a.xhr);for(_i=0,_len=groupedFiles.length;_i<_len;_i++){b=groupedFiles[_i];b.status=l.CANCELED}a.xhr.abort();for(_j=0,_len1=groupedFiles.length;_j<_len1;_j++){b=groupedFiles[_j];this.emit("canceled",b)}if(this.options.uploadMultiple){this.emit("canceledmultiple",groupedFiles)}}else if((_ref=a.status)===l.ADDED||_ref===l.QUEUED){a.status=l.CANCELED;this.emit("canceled",a);if(this.options.uploadMultiple){this.emit("canceledmultiple",[a])}}if(this.options.autoProcessQueue){return this.processQueue()}};l.prototype.uploadFile=function(a){return this.uploadFiles([a])};l.prototype.uploadFiles=function(b){var c,formData,handleError,headerName,headerValue,headers,input,inputName,inputType,key,option,progressObj,response,updateProgress,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_len4,_m,_ref,_ref1,_ref2,_ref3,_ref4,_this=this;xhr=new XMLHttpRequest();for(_i=0,_len=b.length;_i<_len;_i++){c=b[_i];c.xhr=xhr}xhr.open(this.options.method,this.options.url,true);xhr.withCredentials=!!this.options.withCredentials;response=null;handleError=function(){var a,_len1,_results;_results=[];for(a=0,_len1=b.length;a<_len1;a++){c=b[a];_results.push(_this._errorProcessing(b,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr))}return _results};updateProgress=function(e){var a,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(e!=null){progress=100*e.loaded/e.total;for(_j=0,_len1=b.length;_j<_len1;_j++){c=b[_j];c.upload={progress:progress,total:e.total,bytesSent:e.loaded}}}else{a=true;progress=100;for(_k=0,_len2=b.length;_k<_len2;_k++){c=b[_k];if(!(c.upload.progress===100&&c.upload.bytesSent===c.upload.total)){a=false}c.upload.progress=progress;c.upload.bytesSent=c.upload.total}if(a){return}}_results=[];for(_l=0,_len3=b.length;_l<_len3;_l++){c=b[_l];_results.push(_this.emit("uploadprogress",c,progress,c.upload.bytesSent))}return _results};xhr.onload=function(e){var a;if(b[0].status===l.CANCELED){return}if(xhr.readyState!==4){return}response=xhr.responseText;if(xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")){try{response=JSON.parse(response)}catch(_error){e=_error;response="Invalid JSON response from server."}}updateProgress();if(!((200<=(a=xhr.status)&&a<300))){return handleError()}else{return _this._finished(b,response,e)}};xhr.onerror=function(){if(b[0].status===l.CANCELED){return}return handleError()};progressObj=(_ref=xhr.upload)!=null?_ref:xhr;progressObj.onprogress=updateProgress;headers={"Accept":"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){h(headers,this.options.headers)}for(headerName in headers){headerValue=headers[headerName];xhr.setRequestHeader(headerName,headerValue)}formData=new FormData();if(this.options.params){_ref1=this.options.params;for(key in _ref1){value=_ref1[key];formData.append(key,value)}}for(_j=0,_len1=b.length;_j<_len1;_j++){c=b[_j];this.emit("sending",c,xhr,formData)}if(this.options.uploadMultiple){this.emit("sendingmultiple",b,xhr,formData)}if(this.element.tagName==="FORM"){_ref2=this.element.querySelectorAll("input, textarea, select, button");for(_k=0,_len2=_ref2.length;_k<_len2;_k++){input=_ref2[_k];inputName=input.getAttribute("name");inputType=input.getAttribute("type");if(input.tagName==="SELECT"&&input.hasAttribute("multiple")){_ref3=input.options;for(_l=0,_len3=_ref3.length;_l<_len3;_l++){option=_ref3[_l];if(option.selected){formData.append(inputName,option.value)}}}else if(!inputType||((_ref4=inputType.toLowerCase())!=="checkbox"&&_ref4!=="radio")||input.checked){formData.append(inputName,input.value)}}}for(_m=0,_len4=b.length;_m<_len4;_m++){c=b[_m];formData.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),c,c.name)}return xhr.send(formData)};l.prototype._finished=function(a,b,e){var c,_i,_len;for(_i=0,_len=a.length;_i<_len;_i++){c=a[_i];c.status=l.SUCCESS;this.emit("success",c,b,e);this.emit("complete",c)}if(this.options.uploadMultiple){this.emit("successmultiple",a,b,e);this.emit("completemultiple",a)}if(this.options.autoProcessQueue){return this.processQueue()}};l.prototype._errorProcessing=function(a,b,c){var d,_i,_len;for(_i=0,_len=a.length;_i<_len;_i++){d=a[_i];d.status=l.ERROR;this.emit("error",d,b,c);this.emit("complete",d)}if(this.options.uploadMultiple){this.emit("errormultiple",a,b,c);this.emit("completemultiple",a)}if(this.options.autoProcessQueue){return this.processQueue()}};return l})(Em);l.version="3.8.4";l.options={};l.optionsForElement=function(a){if(a.getAttribute("id")){return l.options[camelize(a.getAttribute("id"))]}else{return void 0}};l.instances=[];l.forElement=function(a){if(typeof a==="string"){a=document.querySelector(a)}if((a!=null?a.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");}return a.dropzone};l.autoDiscover=true;l.discover=function(){var c,dropzone,dropzones,_i,_len,_results;if(document.querySelectorAll){dropzones=document.querySelectorAll(".dropzone")}else{dropzones=[];c=function(a){var b,_i,_len,_results;_results=[];for(_i=0,_len=a.length;_i<_len;_i++){b=a[_i];if(/(^| )dropzone($| )/.test(b.className)){_results.push(dropzones.push(b))}else{_results.push(void 0)}}return _results};c(document.getElementsByTagName("div"));c(document.getElementsByTagName("form"))}_results=[];for(_i=0,_len=dropzones.length;_i<_len;_i++){dropzone=dropzones[_i];if(l.optionsForElement(dropzone)!==false){_results.push(new l(dropzone))}else{_results.push(void 0)}}return _results};l.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];l.isBrowserSupported=function(){var a,regex,_i,_len,_ref;a=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){a=false}else{_ref=l.blacklistedBrowsers;for(_i=0,_len=_ref.length;_i<_len;_i++){regex=_ref[_i];if(regex.test(navigator.userAgent)){a=false;continue}}}}else{a=false}return a};without=function(a,b){var c,_i,_len,_results;_results=[];for(_i=0,_len=a.length;_i<_len;_i++){c=a[_i];if(c!==b){_results.push(c)}}return _results};camelize=function(b){return b.replace(/[\-_](\w)/g,function(a){return a[1].toUpperCase()})};l.createElement=function(a){var b;b=document.createElement("div");b.innerHTML=a;return b.childNodes[0]};l.elementInside=function(a,b){if(a===b){return true}while(a=a.parentNode){if(a===b){return true}}return false};l.getElement=function(a,b){var c;if(typeof a==="string"){c=document.querySelector(a)}else if(a.nodeType!=null){c=a}if(c==null){throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");}return c};l.getElements=function(a,b){var e,el,elements,_i,_j,_len,_len1,_ref;if(a instanceof Array){elements=[];try{for(_i=0,_len=a.length;_i<_len;_i++){el=a[_i];elements.push(this.getElement(el,b))}}catch(_error){e=_error;elements=null}}else if(typeof a==="string"){elements=[];_ref=document.querySelectorAll(a);for(_j=0,_len1=_ref.length;_j<_len1;_j++){el=_ref[_j];elements.push(el)}}else if(a.nodeType!=null){elements=[a]}if(!((elements!=null)&&elements.length)){throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");}return elements};l.confirm=function(a,b,c){if(window.confirm(a)){return b()}else if(c!=null){return c()}};l.isValidFile=function(a,b){var c,mimeType,validType,_i,_len;if(!b){return true}b=b.split(",");mimeType=a.type;c=mimeType.replace(/\/.*$/,"");for(_i=0,_len=b.length;_i<_len;_i++){validType=b[_i];validType=validType.trim();if(validType.charAt(0)==="."){if(a.name.toLowerCase().indexOf(validType.toLowerCase(),a.name.length-validType.length)!==-1){return true}}else if(/\/\*$/.test(validType)){if(c===validType.replace(/\/.*$/,"")){return true}}else{if(mimeType===validType){return true}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(a){return this.each(function(){return new l(this,a)})}}if(typeof o!=="undefined"&&o!==null){o.exports=l}else{window.Dropzone=l}l.ADDED="added";l.QUEUED="queued";l.ACCEPTED=l.QUEUED;l.UPLOADING="uploading";l.PROCESSING=l.UPLOADING;l.CANCELED="canceled";l.ERROR="error";l.SUCCESS="success";detectVerticalSquash=function(a){var b,canvas,ctx,data,ey,ih,iw,py,ratio,sy;iw=a.naturalWidth;ih=a.naturalHeight;canvas=document.createElement("canvas");canvas.width=1;canvas.height=ih;ctx=canvas.getContext("2d");ctx.drawImage(a,0,0);data=ctx.getImageData(0,0,1,ih).data;sy=0;ey=ih;py=ih;while(py>sy){b=data[(py-1)*4+3];if(b===0){ey=py}else{sy=py}py=(ey+sy)>>1}ratio=py/ih;if(ratio===0){return 1}else{return ratio}};drawImageIOSFix=function(a,b,c,d,e,f,g,h,i,j){var k;k=detectVerticalSquash(b);return a.drawImage(b,c,d,e,f,g,h,i,j/k)};contentLoaded=function(a,b){var c,doc,done,init,poll,pre,rem,root,top;done=false;top=true;doc=a.document;root=doc.documentElement;c=(doc.addEventListener?"addEventListener":"attachEvent");rem=(doc.addEventListener?"removeEventListener":"detachEvent");pre=(doc.addEventListener?"":"on");init=function(e){if(e.type==="readystatechange"&&doc.readyState!=="complete"){return}(e.type==="load"?a:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){return b.call(a,e.type||e)}};poll=function(){var e;try{root.doScroll("left")}catch(_error){e=_error;setTimeout(poll,50);return}return init("poll")};if(doc.readyState!=="complete"){if(doc.createEventObject&&root.doScroll){try{top=!a.frameElement}catch(_error){}if(top){poll()}}doc[c](pre+"DOMContentLoaded",init,false);doc[c](pre+"readystatechange",init,false);return a[c](pre+"load",init,false)}};l._autoDiscoverFunction=function(){if(l.autoDiscover){return l.discover()}};contentLoaded(window,l._autoDiscoverFunction)}).call(this)});require.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");require.alias("component-emitter/index.js","emitter/index.js");if(typeof exports=="object"){module.exports=require("dropzone")}else if(typeof define=="function"&&define.amd){define(function(){return require("dropzone")})}else{this["Dropzone"]=require("dropzone")}})();